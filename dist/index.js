// @bun
var D;((G)=>{G.GET="GET";G.POST="POST";G.PUT="PUT";G.PATCH="PATCH";G.DELETE="DELETE"})(D||={});var J;((X)=>{X.CSS="text/css";X.HTML="text/html";X.ICO="image/x-icon";X.JPG="image/jpeg";X.JS="application/javascript";X.JSON="application/json";X.SVG="image/svg+xml";X.TEXT="text/plain"})(J||={});function O(E,A,M={}){if(A>=300&&A<400)return Response.redirect(E,A);let T=new Headers;T.set("status",A.toString());for(let[I,G]of Object.entries(M))T.set(I,typeof G==="string"?G:`${G}`);if(E===null)return new Response("",{headers:T});return typeof E==="string"?new Response(`<pre>${E}</pre>`,{headers:{...T,"Content-Type":"text/html"}}):Response.json(E,{headers:{...T,"Content-Type":"application/json"}})}var S=[];async function W(E,A,M=O){let T={...E,context:{},result:{body:null,status:200}};for(let G of S)await G(T);let I=await K(T,A);M(I.body,I.status,I.headers)}function z(E){S=E}async function K(E,A){let{handler:M,inputSchema:T,outputSchema:I}=A;return M.constructor.name==="AsyncFunction"?await M(E):M(E)}function g(E){let A=E.split(".").pop();if(A===void 0)return"text/plain";return J[A.toUpperCase()]||"text/plain"}import j from"fs";import Q from"path";function H(E,A){return j.readdirSync(E).forEach((T)=>{let I=Q.join(E,T);if(j.statSync(I).isDirectory())A=H(I,A);else A.push(I)}),A}function N(E){try{return H(E,[])}catch(A){throw console.error("Error reading folder:",A),A}}function U(E,A){function M(P){if(P=P.slice(T),P.endsWith(I))P=P.replace(I,"");return A+P}if(A===void 0)A=E;let T=E.length,I="index.html",G=N(E),L={};for(let P of G)L[M(P)]=async()=>V(P);return L}async function V(E){let A=await Bun.file(E).arrayBuffer();return new Response(A,{headers:{"Content-Type":g(E)}})}export{z as useMiddlewares,V as staticFile,W as handleRoute,U as addStaticFolder,D as Method,J as ContentType};
